<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Scaphandre v0.1.1: measuring the energy consumption of the tech industry (backstages) - Benoit Petit</title>
  <meta name="description" content="The roots of the project As many other tech workers in startups, I&rsquo;ve worked on pretty large scale projects (even if that&rsquo;s subjective). I&rsquo;m talking about projects involving machine learning, for example, that are often about showing the right advertisment to the right person at the right moment. Training the machine learning models for that requires a lot of resources (CPU, RAM, GPU, etc.). The same is true with APIs that are in charge of collecting data from the clients (the data will very often be used to train the ML models).">
  <meta name="author" content="Benoit Petit"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Benoit Petit",
    
    "url": "https:\/\/bpetit.nce.re"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/bpetit.nce.re"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/bpetit.nce.re",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/bpetit.nce.re\/2021\/01\/scaphandre-v0.1.1-measuring-the-energy-consumption-of-the-tech-industry-backstages\/",
          "name": "Scaphandre v0.1.1 measuring the energy consumption of the tech industry (backstages)"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Benoit Petit"
  },
  "headline": "Scaphandre v0.1.1: measuring the energy consumption of the tech industry (backstages)",
  "description" : "The roots of the project As many other tech workers in startups, I\u0026rsquo;ve worked on pretty large scale projects (even if that\u0026rsquo;s subjective). I\u0026rsquo;m talking about projects involving machine learning, for example, that are often about showing the right advertisment to the right person at the right moment. Training the machine learning models for that requires a lot of resources (CPU, RAM, GPU, etc.). The same is true with APIs that are in charge of collecting data from the clients (the data will very often be used to train the ML models).",
  "inLanguage" : "en",
  "wordCount":  1176 ,
  "datePublished" : "2021-01-20T11:10:24",
  "dateModified" : "2021-01-20T11:10:24",
  "image" : "https:\/\/bpetit.nce.re",
  "keywords" : [ "tech, ecology, energy, cloud, scaphandre, open-source, rust" ],
  "mainEntityOfPage" : "https:\/\/bpetit.nce.re\/2021\/01\/scaphandre-v0.1.1-measuring-the-energy-consumption-of-the-tech-industry-backstages\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/bpetit.nce.re",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/bpetit.nce.re",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Scaphandre v0.1.1: measuring the energy consumption of the tech industry (backstages)" />
<meta property="og:description" content="The roots of the project As many other tech workers in startups, I&rsquo;ve worked on pretty large scale projects (even if that&rsquo;s subjective). I&rsquo;m talking about projects involving machine learning, for example, that are often about showing the right advertisment to the right person at the right moment. Training the machine learning models for that requires a lot of resources (CPU, RAM, GPU, etc.). The same is true with APIs that are in charge of collecting data from the clients (the data will very often be used to train the ML models).">
<meta property="og:image" content="https://bpetit.nce.re/scaphandre.large.cleaned.png" />
<meta property="og:url" content="https://bpetit.nce.re/2021/01/scaphandre-v0.1.1-measuring-the-energy-consumption-of-the-tech-industry-backstages/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Benoit Petit" />

  <meta name="twitter:title" content="Scaphandre v0.1.1: measuring the energy consumption of the tech …" />
  <meta name="twitter:description" content="The roots of the project As many other tech workers in startups, I&rsquo;ve worked on pretty large scale projects (even if that&rsquo;s subjective). I&rsquo;m talking about projects involving machine …">
  <meta name="twitter:image" content="https://bpetit.nce.re/scaphandre.large.cleaned.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@bpetit_" />
  <meta name="twitter:creator" content="@bpetit_" />
  <meta name="generator" content="Hugo 0.82.0" />
  <link rel="alternate" href="https://bpetit.nce.re/index.xml" type="application/rss+xml" title="Benoit Petit"><link rel="stylesheet" href="https://bpetit.nce.re/css/katex.min.css" />
  <link rel="stylesheet" href="https://bpetit.nce.re/fontawesome/css/all.css" />
  <link rel="stylesheet" href="https://bpetit.nce.re/css/bootstrap.min.css" /><link rel="stylesheet" href="https://bpetit.nce.re/css/main.css" /><link rel="stylesheet" href="https://bpetit.nce.re/css/fonts.css" /><link rel="stylesheet" href="https://bpetit.nce.re/css/syntax.css" /><link rel="stylesheet" href="https://bpetit.nce.re/css/codeblock.css" /><link rel="stylesheet" href="https://bpetit.nce.re/css/photoswipe.min.css" />
  <link rel="stylesheet" href="https://bpetit.nce.re/css/photoswipe.default-skin.min.css" />



  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://bpetit.nce.re">Benoit Petit</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        

        
          
            <li>
              
                
              
                
                  <a href="/fr" lang="fr">Français</a>
                
              
            </li>
          
        

        
      </ul>
    </div>

    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="posts-heading">
              
                <h1>Scaphandre v0.1.1: measuring the energy consumption of the tech industry (backstages)</h1>
              
              
                <hr class="small">
              
              
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p><img src="/scaphandre.large.cleaned.png" alt="scaphandre"></p>
<h2 id="the-roots-of-the-project">The roots of the project</h2>
<p>As many other tech workers in startups, I&rsquo;ve worked on pretty large scale projects (even if that&rsquo;s subjective). I&rsquo;m talking about projects involving machine learning, for example, that are often about showing the right advertisment to the right person at the right moment. Training the machine learning models for that requires a lot of resources (CPU, RAM, GPU, etc.). The same is true with APIs that are in charge of collecting data from the clients (the data will very often be used to train the ML models). Those APIs, depending on how many clients are contacting them, will receive up to several billions requests per day (or even more, but I only speak about what I&rsquo;ve seen).</p>
<p>I noticed at that time, that we were often proud and happy of the technical challenge that those systems represented, but we were very less concerned about how many machines were needed to run them.
If you are aware that <a href="https://www.reuters.com/article/global-threats-biodiversity-climate-chan-idUSL8N2JO34K">our</a> <a href="http://web.archive.org/web/20210113085907/https://amp.theguardian.com/environment/2021/jan/13/top-scientists-warn-of-ghastly-future-of-mass-extinction-and-climate-disruption-aoe">future</a> will depend on our ability to deeply change our usages and practices (not only in tech, obviously), you may wonder about what it means to have such energy hungry systems running for the climate (and much more).</p>
<h2 id="so-why-is-nothing-done-about-it-">So, why is nothing done about it ?</h2>
<p>I was unable myself to understand the importance of the consequences of those projects. One of the reasons was that we were using <em>auto-scaling</em> systems and we were running on public clouds (you guessed it), where tech resource is <strong>virtually infinite</strong>. Running new machines, to absorb a traffic surge or train a model, didn&rsquo;t require any human action (thanks to the auto-scaling).
I noticed then, that <strong>tech resources</strong> (CPU/RAM/GPU/&hellip;) <strong>don&rsquo;t have any cognitive relationship</strong> with the <strong>real world</strong>. It&rsquo;s almost impossible in that situation to visualize even a sketch of how much energy is consumed. It&rsquo;s even harder then to understand the consequences on the climate.</p>
<p>How then :</p>
<ul>
<li>make the invisible visible ?</li>
<li>put in sight and attention of the tech companies, starting with people like me wo are (or were) working for those companies, the <strong>impact</strong> of those practices ?</li>
<li>incentive them to reduce that impact ?<br>
(or to change their business model, but that&rsquo;s another story)</li>
</ul>
<h2 id="the-power-of-graphs">The power of graphs</h2>
<p>If you are used to graphs, to receive alarms, or even to do on-call shifts, you know what I&rsquo;ll call <strong>the power of graphs</strong>. This principle (I&rsquo;ve almost written &ldquo;theorem&rdquo; but that would be a bit exagerated), whose base is very real, can be summarized like this: &ldquo;if a user knows (s)he is concerned with a graph, will do something about it, even if (s)he doesn&rsquo;t know yet what it means&rdquo;.</p>
<p>In other more serious words, we only act on what we <strong>measure</strong>.</p>
<p>To have the tech industry reflect and act on its own climate impact, starting with its (<a href="#petites-pr%C3%A9cisions-de-rigueur">secondary</a>) energy consumption , it needs to see its impact and understand it. It&rsquo;s also very important that the efficacity of decisions and actions targeting tech sufficiency can me measured.</p>
<h2 id="going-under-the-surface">Going under the surface</h2>
<p>Let&rsquo;s go the to core of this article which is to present you <a href="https://github.com/hubblo-org/scaphandre">scaphandre</a>, an open-source software to <strong>measure power consumption on a server</strong> or a personnal computer. It can also measure the power consumption of a <strong>single process or application</strong> on the host. To be more precise, scaphandre is a CLI tool and system service (daemon).</p>
<p>This project intends to be simple enough to setup and use, so that power consumption metrics become basic stuff, like the number of requests per second, the latency, the CPU usage, etc. There shall be <strong>no more excuses</strong> to not measure and understand the power consumption of a tech service or system.</p>
<p>Scaphandre is <strong>extensible</strong>, as he can collect the metrics in different ways (<em><a href="https://hubblo-org.github.io/scaphandre/explanations/internal-structure.html#sensors">sensors</a></em>) and send or expose those metrics in different ways (<em><a href="https://hubblo-org.github.io/scaphandre/explanations/internal-structure.html#exporters">exporters</a></em>). However, it only executes one <em>sensor</em> and one <em>exporter</em> at a time (it&rsquo;s okay to run several instance of scaphandre on the same host for different needs).</p>
<p>Because of that, scaphandre can be setup in an infrastructure, <strong>whatever the monitoring stack is</strong>, as you can develop a new exporter for your favorite <a href="https://en.wikipedia.org/wiki/Time_series_database">TSDB</a> or data analysis tool, if the needed exporter doesn&rsquo;t exist already. The idea behind that is that for many tech companies and workers to use it, <strong>the tool must adapt to what&rsquo;s in place</strong> and not the opposite.</p>
<p>Scaphandre aims to be as light as possible, both in terms of ressources and of energy consumption (the opposite would be sad). Its configuration is very simple to not add extra work to the people using it.</p>
<p>Its usage doesn&rsquo;t stop at the infrastructure level, as it can be used to track the power consumption of an application, from one <strong>release</strong> to the other, to see if things are getting better, or worse.</p>
<h2 id="state-and-evolution">State and evolution</h2>
<p>The project is under the Apache-2.0 license and started in octobre 2020. The 0.1.1 version has been released. It contains the following features so far :</p>
<ul>
<li>measuring the energy consumption of an x86 based <strong>bare metal</strong> machine, with GNU/Linux running</li>
<li>measuring the power consumption of the <strong>virtual machines</strong> running on the host (working for Qemu/KVM so far)</li>
<li>expose to a virtual machine, its energy consumption metrics, to allow a <strong>private cloud user</strong> to track and understand his own impact, and use those metrics directly from the instance/VM as it was available in the first place</li>
<li>measuring the energy consumption of the <strong>processes</strong> running on a host</li>
<li>expose the metrics as a <a href="https://prometheus.io">prometheus</a> exporter</li>
<li>display the metrics in the terminal</li>
</ul>
<p><a href="https://metrics.hubblo.org">Here</a> is a sample dashboard where you can see some metrics that scaphandre is able to provide.</p>
<p>Some features should come in the following days or weeks :</p>
<ul>
<li>sending metrics to <a href="http://riemann.io/">riemann</a></li>
<li>measuring the energy consumption of a <a href="https://kubernetes.io/">kubernetes</a> cluster, and the pods and application running on it</li>
</ul>
<p>And a bit later :</p>
<ul>
<li>estimating the energy consumption when <a href="https://medium.com/teads-engineering/evaluating-the-carbon-footprint-of-a-software-platform-hosted-in-the-cloud-e716e14e060c">measuring is not an option</a> (public cloud)</li>
<li>sending the metric to <a href="https://www.warp10.io/">warp10</a></li>
</ul>
<p>Scaphandre is written in <a href="https://www.rust-lang.org/">Rust</a>, but we have added to the <a href="https://github.com/hubblo-org/scaphandre/projects/1">roadmap</a> to allow contributors to write plugins in other languages. Being able to measure on MacOS and on ARM CPUs is also being studied&hellip; stay tuned. To read about the other items of the roadmap, or speak about a feature that may help you track and shrink the energy consumption of a tech project, <a href="https://github.com/hubblo-org/scaphandre">please reach us</a> !</p>
<h2 id="some-precisions">Some precisions</h2>
<ul>
<li>
<p>The energy consumption is only one of the vectors of greenhouse gazes emissions of an industry, among others, of course. The others are beyond the scope of this article.</p>
</li>
<li>
<p>Electricity is a <strong>secondary</strong> energy, different from the primary energies (gaz, oil, nuclear, wind, etc.) which are used to produce it. To measure the greenhouse gazes emissions resulting from consuming electricity, you need to know the primary energies used (and how much, for each of them), which is very different <a href="https://www.electricitymap.org/map">from one country to another</a>. Scaphandre only gives the first item needed to get the climate impact of the design or the usage of a tech service, which is the secondary energy consumption.</p>
</li>
</ul>


        
          <div class="blog-tags">
            
              <a href="https://bpetit.nce.re/tags/tech/">tech</a>&nbsp;
            
              <a href="https://bpetit.nce.re/tags/ecology/">ecology</a>&nbsp;
            
              <a href="https://bpetit.nce.re/tags/energy/">energy</a>&nbsp;
            
              <a href="https://bpetit.nce.re/tags/cloud/">cloud</a>&nbsp;
            
              <a href="https://bpetit.nce.re/tags/scaphandre/">scaphandre</a>&nbsp;
            
              <a href="https://bpetit.nce.re/tags/open-source/">open-source</a>&nbsp;
            
              <a href="https://bpetit.nce.re/tags/rust/">rust</a>&nbsp;
            
          </div>
        

        

        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://bpetit.nce.re/2018/03/automating-web-applications-proxying-dns-registration-and-tls-termination-with-ansible/" data-toggle="tooltip" data-placement="top" title="Automating web applications proxying, DNS registration and TLS termination with ansible">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://bpetit.nce.re/2021/03/sre-methods-and-climate-change/" data-toggle="tooltip" data-placement="top" title="SRE methods and climate change">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:bpetit@nce.re" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/bpetit" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/bpetit_" title="Twitter">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/bepetit" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Benoit Petit
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2021
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://bpetit.nce.re">Benoit Petit</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.82.0</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://bpetit.nce.re/js/katex.min.js"></script>
<script src="https://bpetit.nce.re/js/auto-render.min.js"></script>
<script src="https://bpetit.nce.re/js/jquery.min.js"></script>
<script src="https://bpetit.nce.re/js/bootstrap.min.js"></script>

<script src="https://bpetit.nce.re/js/main.js"></script><script> renderMathInElement(document.body); </script><script src="https://bpetit.nce.re/js/photoswipe.min.js"></script>
<script src="https://bpetit.nce.re/js/photoswipe-ui-default.min.js"></script><script src="https://bpetit.nce.re/js/load-photoswipe.js"></script>









    
  </body>
</html>

